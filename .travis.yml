language: php

dist: trusty

sudo: false

matrix:
    fast_finish: true
    include:
        - php: 5.5
        - php: 5.6
        - php: 7.0
        - php: 7.1
        - php: 7.1
          env: dependencies=lowest
        - php: 7.2

install:
  - composer install --optimize-autoloader --classmap-authoritative --no-interaction
  - if [ "$dependencies" = "lowest" ]; then composer update --prefer-lowest --prefer-stable --optimize-autoloader --classmap-authoritative --no-interaction; fi;

script:
  - mkdir -p build/logs
  - vendor/bin/phpunit --coverage-clover build/logs/coverage.xml

after_script:
  - vendor/bin/coveralls -v --coverage_clover build/logs/coverage.xml
